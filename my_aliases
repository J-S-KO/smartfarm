# ==========================================
# ğŸ“ SmartFarm Aliases (VSCode Env)
# ==========================================

# ------------------------------------------
# 1. ì‹œìŠ¤í…œ ì „ì› ê´€ë¦¬ (System Power)
# ------------------------------------------
# ë¼ì¦ˆë² ë¦¬ íŒŒì´ ìì²´ë¥¼ ë„ê±°ë‚˜ ì¼¤ ë•Œ ì‚¬ìš©
alias farm-off='sudo shutdown -h now'      # ì‹œìŠ¤í…œ ì™„ì „ ì¢…ë£Œ
alias farm-reboot='sudo reboot'            # ì‹œìŠ¤í…œ ì¬ë¶€íŒ…
alias myip='hostname -I'                   # IP ì£¼ì†Œ í™•ì¸

# ------------------------------------------
# 2. ì„œë¹„ìŠ¤ ì œì–´ (Smartfarm Service)
# ------------------------------------------
# ë°±ê·¸ë¼ìš´ë“œì—ì„œ ë„ëŠ” íŒŒì´ì¬ í”„ë¡œê·¸ë¨ì„ ì œì–´
alias svc-on='sudo systemctl start smartfarm'    # ì„œë¹„ìŠ¤ ì‹œì‘
alias svc-off='sudo systemctl stop smartfarm'    # ì„œë¹„ìŠ¤ ì¤‘ì§€
alias svc-restart='sudo systemctl restart smartfarm' # ì„œë¹„ìŠ¤ ì¬ì‹œì‘
alias svc-status='sudo systemctl status smartfarm -n 0' # ìƒíƒœ í™•ì¸
alias svc-log='journalctl -u smartfarm -f'       # ì‹¤ì‹œê°„ ë¡œê·¸ ë³´ê¸° (ë‚˜ê°€ê¸°: Ctrl+C)

# ------------------------------------------
# 3. ì•„ë‘ì´ë…¸ íŒì›¨ì–´ ì—…ë°ì´íŠ¸ (Firmware Update)
# ------------------------------------------
# [í•µì‹¬] ì„œë¹„ìŠ¤ ì¤‘ì§€ -> ì»´íŒŒì¼ -> ì—…ë¡œë“œ -> ì„œë¹„ìŠ¤ ì¬ì‹œì‘ (ì›ìŠ¤í†±)

# [Board A] ì„¼ì„œ ë° OLED ë³´ë“œ ì—…ë°ì´íŠ¸
alias farm-up-a='
    echo "ğŸ›‘ [1/4] ì¶©ëŒ ë°©ì§€ë¥¼ ìœ„í•´ ì„œë¹„ìŠ¤ ì •ì§€..."; 
    sudo systemctl stop smartfarm.service; 
    
    echo "ğŸ”¨ [2/4] board_a ì»´íŒŒì¼ ì¤‘..."; 
    arduino-cli compile --fqbn arduino:avr:uno ~/smartfarm/board_a;
    
    if [ $? -eq 0 ]; then
        echo "âš¡ [3/4] board_a ì—…ë¡œë“œ ì¤‘ (/dev/ttyBoardA)..."; 
        arduino-cli upload -p /dev/ttyBoardA --fqbn arduino:avr:uno ~/smartfarm/board_a;
        
        if [ $? -eq 0 ]; then
            echo "âœ… board_a ì—…ë¡œë“œ ì„±ê³µ!";
        else
            echo "âŒ board_a ì—…ë¡œë“œ ì‹¤íŒ¨!";
        fi
    else
        echo "âŒ ì»´íŒŒì¼ ì‹¤íŒ¨! ì½”ë“œë¥¼ í™•ì¸í•˜ì„¸ìš”.";
    fi

    echo "ğŸš€ [4/4] ì„œë¹„ìŠ¤ ì¬ì‹œì‘..."; 
    sudo systemctl start smartfarm.service; 
'

# [Board B] êµ¬ë™ê¸°(ë¦´ë ˆì´/ëª¨í„°) ë³´ë“œ ì—…ë°ì´íŠ¸
alias farm-up-b='
    echo "ğŸ›‘ [1/4] ì¶©ëŒ ë°©ì§€ë¥¼ ìœ„í•´ ì„œë¹„ìŠ¤ ì •ì§€..."; 
    sudo systemctl stop smartfarm.service; 
    
    echo "ğŸ”¨ [2/4] board_b ì»´íŒŒì¼ ì¤‘..."; 
    arduino-cli compile --fqbn arduino:avr:uno ~/smartfarm/board_b;
    
    if [ $? -eq 0 ]; then
        echo "âš¡ [3/4] board_b ì—…ë¡œë“œ ì¤‘ (/dev/ttyBoardB)..."; 
        arduino-cli upload -p /dev/ttyBoardB --fqbn arduino:avr:uno ~/smartfarm/board_b;
        
        if [ $? -eq 0 ]; then
            echo "âœ… board_b ì—…ë¡œë“œ ì„±ê³µ!";
        else
            echo "âŒ board_b ì—…ë¡œë“œ ì‹¤íŒ¨!";
        fi
    else
        echo "âŒ ì»´íŒŒì¼ ì‹¤íŒ¨! ì½”ë“œë¥¼ í™•ì¸í•˜ì„¸ìš”.";
    fi

    echo "ğŸš€ [4/4] ì„œë¹„ìŠ¤ ì¬ì‹œì‘..."; 
    sudo systemctl start smartfarm.service; 
'

# ------------------------------------------
# 4. ë¡œê·¸ ë° ë°ì´í„° í™•ì¸ (Logs & Data)
# ------------------------------------------
alias farm-log='tail -f ~/smartfarm/logs_system/$(date +%Y-%m)/smartfarm_$(date +%Y-%m-%d).log'  # ì‹¤ì‹œê°„ ë¡œê·¸ ë³´ê¸°
alias farm-log-100='tail -n 100 ~/smartfarm/logs_system/$(date +%Y-%m)/smartfarm_$(date +%Y-%m-%d).log'  # ìµœê·¼ 100ì¤„ ë¡œê·¸
alias farm-log-err='journalctl -u smartfarm -p err -n 50'  # ìµœê·¼ ì—ëŸ¬ ë¡œê·¸ë§Œ í™•ì¸
alias farm-data='ls -lth ~/smartfarm/logs_data/*/smartfarm_log_*.csv | head -10'  # ìµœê·¼ ì„¼ì„œ ë°ì´í„° íŒŒì¼
alias farm-cd='cd ~/smartfarm'                              # ìŠ¤ë§ˆíŠ¸íŒœ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
alias farm-img='ls -lth ~/smartfarm/images/*/ | head -20'   # ìµœê·¼ ì´ë¯¸ì§€ í™•ì¸
alias farm-disk='df -h ~/smartfarm'                         # ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰ í™•ì¸

# ------------------------------------------
# 5. ì„¤ì • ë° ë„ìš°ë¯¸ (Utils)
# ------------------------------------------
alias farm-conf='nano ~/smartfarm/my_aliases && source ~/.bashrc' # ì´ íŒŒì¼ ìˆ˜ì •

# [Git í•„ìˆ˜ ëª…ë ¹ì–´ ìš”ì•½]
function git-help() {
    cat << "EOF"
=== ğŸ™ Git í•µì‹¬ ëª…ë ¹ì–´ ===
1. ë³€ê²½ì‚¬í•­ í™•ì¸ :  git status
2. ì €ì¥ (ë‚´ì»´)   :  git add .  â†’  git commit -m "ë©”ì‹œì§€"
3. ì—…ë¡œë“œ (Github): git push
4. ë‹¤ìš´ë¡œë“œ (Github): git pull
EOF
}

# [ì „ì²´ ë©”ë‰´íŒ]
function farm-help() {
    cat << "EOF"

=== ğŸ“ ìŠ¤ë§ˆíŠ¸íŒœ ëª…ë ¹ì–´ (VSCode í™˜ê²½) ===

[ ğŸ”Œ ì‹œìŠ¤í…œ ì „ì› ]
  farm-off      : ë¼ì¦ˆë² ë¦¬ íŒŒì´ ì¢…ë£Œ (Shutdown)
  farm-reboot   : ë¼ì¦ˆë² ë¦¬ íŒŒì´ ì¬ë¶€íŒ…
  myip          : ë¼ì¦ˆë² ë¦¬ íŒŒì´ IP ì£¼ì†Œ í™•ì¸

[ ğŸ§  ì„œë¹„ìŠ¤ ì œì–´ ] (í†µí•© ì„œë¹„ìŠ¤: ì„¼ì„œ/ìë™í™”/ì›¹UI)
  svc-on        : ì„œë¹„ìŠ¤ ì‹œì‘ (ì„¼ì„œ ìˆ˜ì§‘ + ìë™í™” + ì›¹ UI)
  svc-off       : ì„œë¹„ìŠ¤ ì¤‘ì§€
  svc-restart   : ì„œë¹„ìŠ¤ ì¬ì‹œì‘ (ì½”ë“œ ìˆ˜ì • í›„ í•„ìˆ˜)
  svc-status    : ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
  svc-log       : ì‹¤ì‹œê°„ ë¡œê·¸ ë³´ê¸° (Ctrl+Cë¡œ ì¢…ë£Œ)

[ ğŸŒ ì›¹ UI ì ‘ì† ]
  ì›¹ ëŒ€ì‹œë³´ë“œ: http://$(hostname -I | awk '{print $1}'):5000
  ë˜ëŠ”: http://localhost:5000
  (ì„œë¹„ìŠ¤ ì‹¤í–‰ ì¤‘ì¼ ë•Œë§Œ ì ‘ì† ê°€ëŠ¥)

[ âš¡ ì•„ë‘ì´ë…¸ íŒì›¨ì–´ ì—…ë°ì´íŠ¸ ] (ìë™ ì»´íŒŒì¼+ì—…ë¡œë“œ+ì¬ì‹œì‘)
  farm-up-a     : Board A (ì„¼ì„œ/OLED) ì—…ë°ì´íŠ¸
  farm-up-b     : Board B (ëª¨í„°/ë¦´ë ˆì´) ì—…ë°ì´íŠ¸

[ ğŸ“Š ë¡œê·¸ ë° ë°ì´í„° í™•ì¸ ]
  farm-log      : ì‹¤ì‹œê°„ ì‹œìŠ¤í…œ ë¡œê·¸ ë³´ê¸°
  farm-log-100  : ìµœê·¼ 100ì¤„ ì‹œìŠ¤í…œ ë¡œê·¸
  farm-log-err  : ìµœê·¼ ì—ëŸ¬ ë¡œê·¸ë§Œ í™•ì¸
  farm-data     : ìµœê·¼ ì„¼ì„œ ë°ì´í„° íŒŒì¼ ëª©ë¡
  farm-img      : ìµœê·¼ ì´¬ì˜ ì´ë¯¸ì§€ í™•ì¸
  farm-disk     : ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰ í™•ì¸
  farm-cd       : ìŠ¤ë§ˆíŠ¸íŒœ ë””ë ‰í† ë¦¬ë¡œ ì´ë™

[ ğŸ›  ê¸°íƒ€ ìœ í‹¸ë¦¬í‹° ]
  git-help      : Git ëª…ë ¹ì–´ ì»¤ë‹í˜ì´í¼
  farm-conf     : ì´ íŒŒì¼(my_aliases) ìˆ˜ì •

[ ğŸ’¡ íŒ ]
  - ì½”ë“œ ìˆ˜ì • í›„ì—ëŠ” ë°˜ë“œì‹œ svc-restart ì‹¤í–‰
  - ì›¹ UIëŠ” ì„œë¹„ìŠ¤ê°€ ì‹¤í–‰ ì¤‘ì¼ ë•Œë§Œ ì ‘ì† ê°€ëŠ¥
  - ë¡œê·¸ëŠ” logs_system/YYYY-MM/ í´ë”ì— ì¼ì¼ ë‹¨ìœ„ë¡œ ì €ì¥ë¨
  - ì„¼ì„œ ë°ì´í„°ëŠ” logs_data/YYYY-MM/ í´ë”ì— CSVë¡œ ì €ì¥ë¨

EOF
}