# ==========================================
# ğŸ“ SmartFarm Aliases (VSCode Env)
# ==========================================

# ------------------------------------------
# 1. ì‹œìŠ¤í…œ ì „ì› ê´€ë¦¬ (System Power)
# ------------------------------------------
# ë¼ì¦ˆë² ë¦¬ íŒŒì´ ìì²´ë¥¼ ë„ê±°ë‚˜ ì¼¤ ë•Œ ì‚¬ìš©
alias farm-off='sudo shutdown -h now'      # ì‹œìŠ¤í…œ ì™„ì „ ì¢…ë£Œ
alias farm-reboot='sudo reboot'            # ì‹œìŠ¤í…œ ì¬ë¶€íŒ…
alias myip='hostname -I'                   # IP ì£¼ì†Œ í™•ì¸

# ------------------------------------------
# 2. ì„œë¹„ìŠ¤ ì œì–´ (Smartfarm Service)
# ------------------------------------------
# ë°±ê·¸ë¼ìš´ë“œì—ì„œ ë„ëŠ” íŒŒì´ì¬ í”„ë¡œê·¸ë¨ì„ ì œì–´
alias svc-on='sudo systemctl start smartfarm'    # ì„œë¹„ìŠ¤ ì‹œì‘
alias svc-off='sudo systemctl stop smartfarm'    # ì„œë¹„ìŠ¤ ì¤‘ì§€
alias svc-restart='sudo systemctl restart smartfarm' # ì„œë¹„ìŠ¤ ì¬ì‹œì‘
alias svc-status='sudo systemctl status smartfarm -n 0' # ìƒíƒœ í™•ì¸
alias svc-log='journalctl -u smartfarm -f'       # ì‹¤ì‹œê°„ ë¡œê·¸ ë³´ê¸° (ë‚˜ê°€ê¸°: Ctrl+C)

# ------------------------------------------
# 3. ì•„ë‘ì´ë…¸ íŒì›¨ì–´ ì—…ë°ì´íŠ¸ (Firmware Update)
# ------------------------------------------
# [í•µì‹¬] ì„œë¹„ìŠ¤ ì¤‘ì§€ -> ì»´íŒŒì¼ -> ì—…ë¡œë“œ -> ì„œë¹„ìŠ¤ ì¬ì‹œì‘ (ì›ìŠ¤í†±)

# [Board A] ì„¼ì„œ ë° OLED ë³´ë“œ ì—…ë°ì´íŠ¸
alias farm-up-a='
    echo "ğŸ›‘ [1/4] ì¶©ëŒ ë°©ì§€ë¥¼ ìœ„í•´ ì„œë¹„ìŠ¤ ì •ì§€..."; 
    sudo systemctl stop smartfarm.service; 
    
    echo "ğŸ”¨ [2/4] board_a ì»´íŒŒì¼ ì¤‘..."; 
    arduino-cli compile --fqbn arduino:avr:uno ~/smartfarm/board_a;
    
    if [ $? -eq 0 ]; then
        echo "âš¡ [3/4] board_a ì—…ë¡œë“œ ì¤‘ (/dev/ttyBoardA)..."; 
        arduino-cli upload -p /dev/ttyBoardA --fqbn arduino:avr:uno ~/smartfarm/board_a;
        
        if [ $? -eq 0 ]; then
            echo "âœ… board_a ì—…ë¡œë“œ ì„±ê³µ!";
        else
            echo "âŒ board_a ì—…ë¡œë“œ ì‹¤íŒ¨!";
        fi
    else
        echo "âŒ ì»´íŒŒì¼ ì‹¤íŒ¨! ì½”ë“œë¥¼ í™•ì¸í•˜ì„¸ìš”.";
    fi

    echo "ğŸš€ [4/4] ì„œë¹„ìŠ¤ ì¬ì‹œì‘..."; 
    sudo systemctl start smartfarm.service; 
'

# [Board B] êµ¬ë™ê¸°(ë¦´ë ˆì´/ëª¨í„°) ë³´ë“œ ì—…ë°ì´íŠ¸
alias farm-up-b='
    echo "ğŸ›‘ [1/4] ì¶©ëŒ ë°©ì§€ë¥¼ ìœ„í•´ ì„œë¹„ìŠ¤ ì •ì§€..."; 
    sudo systemctl stop smartfarm.service; 
    
    echo "ğŸ”¨ [2/4] board_b ì»´íŒŒì¼ ì¤‘..."; 
    arduino-cli compile --fqbn arduino:avr:uno ~/smartfarm/board_b;
    
    if [ $? -eq 0 ]; then
        echo "âš¡ [3/4] board_b ì—…ë¡œë“œ ì¤‘ (/dev/ttyBoardB)..."; 
        arduino-cli upload -p /dev/ttyBoardB --fqbn arduino:avr:uno ~/smartfarm/board_b;
        
        if [ $? -eq 0 ]; then
            echo "âœ… board_b ì—…ë¡œë“œ ì„±ê³µ!";
        else
            echo "âŒ board_b ì—…ë¡œë“œ ì‹¤íŒ¨!";
        fi
    else
        echo "âŒ ì»´íŒŒì¼ ì‹¤íŒ¨! ì½”ë“œë¥¼ í™•ì¸í•˜ì„¸ìš”.";
    fi

    echo "ğŸš€ [4/4] ì„œë¹„ìŠ¤ ì¬ì‹œì‘..."; 
    sudo systemctl start smartfarm.service; 
'

# ------------------------------------------
# 4. ì„¤ì • ë° ë„ìš°ë¯¸ (Utils)
# ------------------------------------------
alias farm-conf='nano ~/.bash_aliases && source ~/.bashrc' # ì´ íŒŒì¼ ìˆ˜ì •

# [Git í•„ìˆ˜ ëª…ë ¹ì–´ ìš”ì•½]
function git-help() {
    cat << "EOF"
=== ğŸ™ Git í•µì‹¬ ëª…ë ¹ì–´ ===
1. ë³€ê²½ì‚¬í•­ í™•ì¸ :  git status
2. ì €ì¥ (ë‚´ì»´)   :  git add .  â†’  git commit -m "ë©”ì‹œì§€"
3. ì—…ë¡œë“œ (Github): git push
4. ë‹¤ìš´ë¡œë“œ (Github): git pull
EOF
}

# [ì „ì²´ ë©”ë‰´íŒ]
function farm-help() {
    cat << "EOF"

=== ğŸ“ ìŠ¤ë§ˆíŠ¸íŒœ ëª…ë ¹ì–´ (VSCode í™˜ê²½) ===

[ ğŸ”Œ ì‹œìŠ¤í…œ ì „ì› ]
  farm-off      : ë¼ì¦ˆë² ë¦¬ íŒŒì´ ì¢…ë£Œ (Shutdown)
  farm-reboot   : ë¼ì¦ˆë² ë¦¬ íŒŒì´ ì¬ë¶€íŒ…

[ ğŸ§  ì„œë¹„ìŠ¤ ì œì–´ ] (íŒŒì´ì¬ í”„ë¡œê·¸ë¨)
  svc-on        : ì„œë¹„ìŠ¤ ì¼œê¸°
  svc-off       : ì„œë¹„ìŠ¤ ë„ê¸°
  svc-restart   : ì¬ì‹œì‘ (ì½”ë“œ ìˆ˜ì • í›„ í•„ìˆ˜)
  svc-log       : ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸
  svc-status    : í˜„ì¬ ì‘ë™ ì—¬ë¶€ í™•ì¸

[ âš¡ ì•„ë‘ì´ë…¸ ì—…ë¡œë“œ ] (ìë™ ì»´íŒŒì¼+ì—…ë¡œë“œ+ì¬ì‹œì‘)
  farm-up-a     : Board A (ì„¼ì„œ/OLED) ì—…ë°ì´íŠ¸
  farm-up-b     : Board B (ëª¨í„°/ë¦´ë ˆì´) ì—…ë°ì´íŠ¸

[ ğŸ›  ê¸°íƒ€ ]
  git-help      : ê¹ƒ ëª…ë ¹ì–´ ì»¤ë‹í˜ì´í¼
  farm-conf     : ë‹¨ì¶•í‚¤ ì„¤ì • ìˆ˜ì •

EOF
}